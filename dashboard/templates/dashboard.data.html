<%inherit file="/homepage/templates/base.htm" />

<%block name="content">
    <style>

.chart div {
  font: 10px sans-serif;
  background-color: steelblue;
  text-align: right;
  padding: 3px;
  margin: 1px;
  color: white;
}

</style>
  <div class="content">
    <h2 class="manage">Dashboard Data</h2>
    <div class="clearfix"></div>
    <br/>
    <div class="row form-inline">
      <div class="col-md-3">
        <input type="search" class="light-table-filter form-control" data-table="order-table" placeholder="Filter">
      </div>
      <div class="col-md-3">
      </div>
      <div class="col-md-6">
        <div class="text-right">
          <button  id="button" class="btn btn-primary">Upload Instructions</button>
        </div>
      </div>
    </div>

<br/>
<br/>

<style>

body {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.bar {
  fill: orange;
}

.bar:hover {
  fill: orangered ;
}

.x.axis path {
  display: none;
}

.d3-tip {
  line-height: 1;
  font-weight: bold;
  padding: 12px;
  background: rgba(0, 0, 0, 0.8);
  color: #fff;
  border-radius: 2px;
}

/* Creates a small triangle extender for the tooltip */
.d3-tip:after {
  box-sizing: border-box;
  display: inline;
  font-size: 10px;
  width: 100%;
  line-height: 1;
  color: rgba(0, 0, 0, 0.8);
  content: "\25BC";
  position: absolute;
  text-align: center;
}

/* Style northward tooltips differently */
.d3-tip.n:after {
  margin: -1px 0 0 0;
  top: 100%;
  left: 0;
}

        .axis path {
            fill: none;
            stroke: #777;
            shape-rendering: crispEdges;
        }
        .axis text {
            font-family: Lato;
            font-size: 13px;
        }
</style>
<body>
<div class="line_chart">
</div>
<div class="jumbotron">
            <svg id="visualisation" width="1000" height="500"></svg>
</div>
      <script>
          function InitChart() {
      /*      var data = [{
                "sale": "202",
                "year": "2000"
            }, {
                "sale": "215",
                "year": "2002"
            }, {
                "sale": "179",
                "year": "2004"
            }, {
                "sale": "199",
                "year": "2006"
            }, {
                "sale": "134",
                "year": "2008"
            }, {
                "sale": "176",
                "year": "2010"
            }];
            var data2 = [{
                "sale": "152",
                "year": "2000"
            }, {
                "sale": "189",
                "year": "2002"
            }, {
                "sale": "179",
                "year": "2004"
            }, {
                "sale": "199",
                "year": "2006"
            }, {
                "sale": "134",
                "year": "2008"
            }, {
                "sale": "176",
                "year": "2010"
            }];
        */
        var data = ${trans_json}
            var vis = d3.select("#visualisation"),
                WIDTH = 1000,
                HEIGHT = 500,
                MARGINS = {
                    top: 20,
                    right: 20,
                    bottom: 20,
                    left: 50
                },
                xScale = d3.scale.linear().range([MARGINS.left, WIDTH - MARGINS.right]).domain([2000, 2010]),
                yScale = d3.scale.linear().range([HEIGHT - MARGINS.top, MARGINS.bottom]).domain([134, 215]),
                xAxis = d3.svg.axis()
                .scale(xScale),
                yAxis = d3.svg.axis()
                .scale(yScale)
                .orient("left");
            
            vis.append("svg:g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + (HEIGHT - MARGINS.bottom) + ")")
                .call(xAxis);
            vis.append("svg:g")
                .attr("class", "y axis")
                .attr("transform", "translate(" + (MARGINS.left) + ",0)")
                .call(yAxis);
            var lineGen = d3.svg.line()
                .x(function(d) {
                    return xScale(d[0]);
                })
                .y(function(d) {
                    return yScale(d[1]);
                })
                .interpolate("basis");
            vis.append('svg:path')
                .attr('d', lineGen(data))
                .attr('stroke', 'green')
                .attr('stroke-width', 2)
                .attr('fill', 'none');
           /* vis.append('svg:path')
                .attr('d', lineGen(data2))
                .attr('stroke', 'blue')
                .attr('stroke-width', 2)
                .attr('fill', 'none'); */
        }
        InitChart();
      </script>

</body>

</div>

</%block>
